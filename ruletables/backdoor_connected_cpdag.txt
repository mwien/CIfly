EDGES --> <--, ---
SETS X, C, W
START <-- AT X
OUTPUT ...

--> | <-- | current in W
--- | --- | current not in W
... | --> | current not in W and (current not in X or next not in C)
<-- | ... | current not in W 
